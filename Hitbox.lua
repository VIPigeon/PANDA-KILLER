--[[

–•–∏—Ç–±–æ–∫—Å -- –∫–æ—Ä–æ–±–∫–∞ üì¶, –∫–æ—Ç–æ—Ä–∞—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è –∫ —á–µ–º—É-—Ç–æ –¥—Ä—É–≥–æ–º—É, —É —á–µ–≥–æ
–µ—Å—Ç—å –ø–æ–∑–∏—Ü–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä:

player = {
    x = 10,
    y = 20,
    hitbox = Hitbox:new(2, 0, 8, 8),
}

–•–∏—Ç–±–æ–∫—Å –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç—Å—Ç—É–ø –æ—Ç –ª–µ–≤–æ–≥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è –∫–∞–∫–æ–≥–æ-—Ç–æ –æ–±—ä–µ–∫—Ç–∞ (–≤ –ø—Ä–∏–º–µ—Ä–µ
–≤—ã—à–µ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç -- –∏–≥—Ä–æ–∫) —Å –∫–∞–∫–∏–º-—Ç–æ —Ä–∞–∑–º–µ—Ä–æ–º. –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–∏—Ç–±–æ–∫—Å –¥–ª—è
–ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–ª–ª–∏–∑–∏–∏, –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏–∑ –Ω–µ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ —Å –ø–æ–º–æ—â—å—é to_rect –∏–ª–∏
rect_of.

–í—Å—ë —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ –ø–æ—Ç–æ–º—É —á—Ç–æ Hitbox -- –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –∞
Rect -- –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É–¥–æ–±–Ω–µ–µ, –Ω–æ —É –Ω–∏—Ö
–Ω–µ–ª—å–∑—è –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–¥ –ª—é–±–æ–π —Ñ–∏–∑–∏–∫–æ–π –º—ã –ø–µ—Ä–µ–≤–æ–¥–∏–º –ª–æ–∫–∞–ª—å–Ω—ã–µ
–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ, –∏–ª–∏ –∂–µ Hitbox -> Rect

–û–±—ä—è—Å–Ω—é —Å –ø–æ–º–æ—â—å—é —Ä–∏—Å—É–Ω–∫–∞ ‚úè:

–ö–∞—Ä—Ç–∏–Ω–∫–∞ 1
    (x = 240, y = 15)
        +-----------+
        |           |
        |           |
        |           |
        |           |
        +-----------+

        ^^^^^^^^^^^^^ –ò–≥—Ä–æ–∫

–ö–∞—Ä—Ç–∏–Ω–∫–∞ 2
    (x = 240, y = 15)
        +-----------+
        |  +-----+  |
        |  |     |  |
        |  |     |  |
        |  |     |  |
        +--+-----+--+

            ^^^^^ –•–∏—Ç–±–æ–∫—Å –∏–≥—Ä–æ–∫–∞ (—Å–ª–µ–≥–∫–∞ –º–µ–Ω—å—à–µ —á–µ–º —Å–∞–º —Å–ø—Ä–∞–π—Ç).
                  –£ –Ω–µ–≥–æ offset_x = 2, offset_y = 1 -- –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

–ö–∞—Ä—Ç–∏–Ω–∫–∞ 3
  (x = 240 + offset_x, y = 15 + offset_y)
           +-----+
           |     |
           |     |
           |     |
           +-----+
           ^^^^^^^ –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫! –î–æ —ç—Ç–æ–≥–æ —É –Ω–∞—Å –±—ã–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –Ω–∞—á–∞–ª–æ
                   –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–æ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∏–≥—Ä–æ–∫–∞ (offset_x, offset_y),
                   –∞ —Ç–µ–ø–µ—Ä—å –º—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–ª–∏ –∏—Ö –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

–ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è —Ç–∞–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:
@kawaii-Code, –≥–¥–µ-—Ç–æ –≤ –¥–∞–ª—ë–∫–æ–º —Å–µ–Ω—Ç—è–±—Ä–µ 2024:
-- –î—É–∞–ª—å–Ω–æ—Å—Ç—å —Ö–∏—Ç–±–æ–∫—Å–æ–≤ —Å –æ—Ñ—Ñ—Å–µ—Ç–æ–º –∏ –±–µ–∑ –º–µ–Ω—è –ø–æ–¥–±–µ—à–∏–≤–∞–µ—Ç ü§¨
-- –ï—Å—Ç—å —Ö–∏—Ç–±–æ–∫—Å —Å offset_x, offset_y, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø—Ä–∏—Ü–µ–ø–ª—è—Ç—å –∫ –¥—Ä—É–≥–æ–º—É
-- –∏–≥—Ä–æ–≤–æ–º—É –æ–±—ä–µ–∫—Ç—É, –∞ –µ—Å—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π —Ö–∏—Ç–±–æ–∫—Å (–ø—Ä–æ—Å—Ç–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)
-- —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å x, y -- –º–∏—Ä–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã. –ò —Å –Ω–∏–º–∏
-- –Ω–µ–º–Ω–æ–≥–æ –ø—É—Ç–∞–Ω–∏—Ü–∞. –í–æ—Ç –±—ã —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —è–∑—ã–∫ üòã
--
-- –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∏–∑ –æ—Ñ—Ñ—Å–µ—Ç–Ω–æ–≥–æ –≤ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫

--]]

Hitbox = {}

function Hitbox:new(offset_x, offset_y, width, height)
    local object = {
        offset_x = offset_x,
        offset_y = offset_y,
        width = width,
        height = height,
    }

    setmetatable(object, self)
    return object
end

function Hitbox:to_rect(x, y)
    return Rect:new(x + self.offset_x, y + self.offset_y, self.width, self.height)
end

function Hitbox.rect_of(object)
    if (object.x == nil or object.y == nil) then
        error('mistake in hitbox argument: object.x and object.y are missing')
    end
    if (object.hitbox == nil) then
        error('mistake in hitbox argument: object.hitbox is missing')
    end
    if (object.hitbox.to_rect == nil) then
        error('mistake in hitbox argument: object.hitbox is not of class Hitbox')
    end
    return object.hitbox:to_rect(object.x, object.y)
end

Hitbox.__index = Hitbox
